{"version":3,"sources":["state/products/actions.js","components/cart/Cart.js"],"names":["getProducts","page","url","dispatch","a","type","query","axios","get","data","payload","products","pagination","count","console","log","response","error","message","getSingle","id","getCart","addToCart","item","post","cart","setAxiosToken","removeItem","itemid","put","reduceItem","addItem","clearCart","connect","state","loading","history","useEffect","className","totalWithShipping","items","map","i","key","src","product","photo_id","alt","name","variations","Object","entries","vari","totalItemPrice","onClick","itemID","quantity","totalPrice","shipping","push"],"mappings":"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","file":"static/js/12.effb4275.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport setAxiosToken from '../../utils/setAxiosToken';\r\n\r\nexport const getProducts = (\r\n\tpage = 1,\r\n\turl = '/api/v1/products?limit=6&'\r\n) => async dispatch => {\r\n\tdispatch({ type: 'PRODUCTS_LOADING' });\r\n\r\n\tlet query = url + `&page=${page}&select=name,price,discountPrice,id,photo_id`;\r\n\r\n\ttry {\r\n\t\tconst { data } = await axios.get(query);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'GET_PRODUCTS',\r\n\t\t\tpayload: {\r\n\t\t\t\tproducts: data.data,\r\n\t\t\t\tpagination: data.pagination,\r\n\t\t\t\tcount: data.count,\r\n\t\t\t\turl\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (err) {\r\n\t\tconsole.log(err.response ? err.response.data.error : err.message);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const getSingle = id => async dispatch => {\r\n\tdispatch({ type: 'PRODUCTS_LOADING' });\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/v1/products/${id}`);\r\n\r\n\t\tdispatch({ type: 'CURRENT_PRODUCT', payload: data.data });\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const getCart = () => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.get('/api/v1/cart');\r\n\t\tdispatch({ type: 'GET_CART', payload: data.data });\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const addToCart = item => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.post('/api/v1/cart', item);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\treturn false;\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t\treturn err.response ? err.response.data.error : err.message;\r\n\t}\r\n};\r\n\r\nexport const removeItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/remove/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const reduceItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/reduce/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const addItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/add/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const clearCart = () => ({\r\n\ttype: 'CLEAR_CART'\r\n});\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport BasicLoading from '../loading/BasicLoading';\r\nimport {\r\n\treduceItem,\r\n\taddItem,\r\n\tremoveItem,\r\n\tgetCart\r\n} from '../../state/products/actions';\r\n\r\nconst Cart = ({\r\n\treduceItem,\r\n\taddItem,\r\n\tremoveItem,\r\n\tgetCart,\r\n\tcart,\r\n\tloading,\r\n\terror,\r\n\thistory\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\tgetCart();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tif (!loading && error) {\r\n\t\treturn (\r\n\t\t\t<div className='container'>\r\n\t\t\t\t{error && <h2 className='error'>{error}</h2>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (!loading && cart !== null) {\r\n\t\tconsole.log(cart);\r\n\t\treturn (\r\n\t\t\t<section className='cart'>\r\n\t\t\t\t<div className='container'>\r\n\t\t\t\t\t<h1 className='cart-title'>\r\n\t\t\t\t\t\tYour Cart <span>${cart.totalWithShipping / 100}</span>\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<div className='cart-wrapper'>\r\n\t\t\t\t\t\t<div className='cart-items'>\r\n\t\t\t\t\t\t\t{cart.items.map((item, i) => (\r\n\t\t\t\t\t\t\t\t<div className='cart-single-item' key={i}>\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\t'https://res.cloudinary.com/dnchnxwkl/image/upload/h_60,c_fill/' +\r\n\t\t\t\t\t\t\t\t\t\t\titem.product.photo_id\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\talt=''\r\n\t\t\t\t\t\t\t\t\t\tclassName='item-image'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='item-info'>\r\n\t\t\t\t\t\t\t\t\t\t<h4>{item.product.name}</h4>\r\n\t\t\t\t\t\t\t\t\t\t{item.variations && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='variations'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Object.entries(item.variations).map((vari, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>{vari[0]}:</strong> {vari[1]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<p className='item-total'>${item.totalItemPrice / 100}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='item-options'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='qty-handlers'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => addItem(item.itemID)}>+</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>{item.quantity}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => reduceItem(item.itemID)}>-</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='remove'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeItem(item.itemID)}>\r\n\t\t\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='cart-subtotal'>\r\n\t\t\t\t\t\t\t<p>Total: ${cart.totalPrice / 100}</p>\r\n\t\t\t\t\t\t\t<p>Shipping: ${cart.shipping / 100}</p>\r\n\t\t\t\t\t\t\t<p className='subtotal'>\r\n\t\t\t\t\t\t\t\tSubtotal: ${cart.totalWithShipping / 100}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<button onClick={() => history.push('/checkout')}>\r\n\t\t\t\t\t\t\t\tCheckout\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n\r\n\treturn <BasicLoading />;\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n\tcart: state.products.cart,\r\n\tloading: state.products.loading,\r\n\terror: state.products.error\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n\tremoveItem,\r\n\taddItem,\r\n\treduceItem,\r\n\tgetCart\r\n})(Cart);\r\n"],"sourceRoot":""}