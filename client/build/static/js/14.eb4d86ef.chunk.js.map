{"version":3,"sources":["state/products/actions.js","components/product-page/ProductPage.js"],"names":["getProducts","page","url","dispatch","a","type","query","axios","get","data","payload","products","pagination","count","console","log","response","error","message","getSingle","id","getCart","addToCart","item","post","cart","setAxiosToken","removeItem","itemid","put","reduceItem","addItem","clearCart","toastSettings","position","toast","POSITION","BOTTOM_RIGHT","connect","state","current","loading","history","match","params","useState","options","setOptions","quantity","setQuantity","useEffect","sendToCart","variations","values","Object","allFilled","forEach","value","productID","_id","success","className","keys","key","map","i","toUpperCase","name","onChange","e","target","to","style","backgroundImage","photo_id","discountPrice","price","onClick","description","autoClose","pauseOnFocusLoss","push"],"mappings":"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","file":"static/js/14.eb4d86ef.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport setAxiosToken from '../../utils/setAxiosToken';\r\n\r\nexport const getProducts = (\r\n\tpage = 1,\r\n\turl = '/api/v1/products?limit=6&'\r\n) => async dispatch => {\r\n\tdispatch({ type: 'PRODUCTS_LOADING' });\r\n\r\n\tlet query = url + `&page=${page}&select=name,price,discountPrice,id,photo_id`;\r\n\r\n\ttry {\r\n\t\tconst { data } = await axios.get(query);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: 'GET_PRODUCTS',\r\n\t\t\tpayload: {\r\n\t\t\t\tproducts: data.data,\r\n\t\t\t\tpagination: data.pagination,\r\n\t\t\t\tcount: data.count,\r\n\t\t\t\turl\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (err) {\r\n\t\tconsole.log(err.response ? err.response.data.error : err.message);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const getSingle = id => async dispatch => {\r\n\tdispatch({ type: 'PRODUCTS_LOADING' });\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/v1/products/${id}`);\r\n\r\n\t\tdispatch({ type: 'CURRENT_PRODUCT', payload: data.data });\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const getCart = () => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.get('/api/v1/cart');\r\n\t\tdispatch({ type: 'GET_CART', payload: data.data });\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const addToCart = item => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.post('/api/v1/cart', item);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\treturn false;\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t\treturn err.response ? err.response.data.error : err.message;\r\n\t}\r\n};\r\n\r\nexport const removeItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/remove/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const reduceItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/reduce/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const addItem = itemid => async dispatch => {\r\n\ttry {\r\n\t\tconst { data } = await axios.put(`/api/v1/cart/add/${itemid}`);\r\n\t\tdispatch({ type: 'SET_CART_TOKEN', payload: data.cart });\r\n\t\tsetAxiosToken();\r\n\t\tdispatch(getCart());\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tdispatch({\r\n\t\t\ttype: 'PRODUCTS_ERROR',\r\n\t\t\tpayload: err.response ? err.response.data.error : err.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const clearCart = () => ({\r\n\ttype: 'CLEAR_CART'\r\n});\r\n","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport BasicLoading from '../loading/BasicLoading';\r\nimport { getSingle, addToCart } from '../../state/products/actions';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst toastSettings = {\r\n\tposition: toast.POSITION.BOTTOM_RIGHT\r\n};\r\n\r\nconst ProductPage = ({\r\n\thistory,\r\n\tmatch: {\r\n\t\tparams: { id }\r\n\t},\r\n\tcurrent,\r\n\tloading,\r\n\terror,\r\n\tgetSingle,\r\n\taddToCart\r\n}) => {\r\n\tconst [options, setOptions] = useState(null);\r\n\tconst [quantity, setQuantity] = useState(1);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetSingle(id);\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tconst sendToCart = async () => {\r\n\t\tif (current.variations) {\r\n\t\t\tconst values = Object.values(options);\r\n\t\t\tlet allFilled = true;\r\n\r\n\t\t\tvalues.forEach(value => {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\tallFilled = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (!allFilled) {\r\n\t\t\t\treturn toast.error('Please set all your options...', toastSettings);\r\n\t\t\t}\r\n\r\n\t\t\tconst response = await addToCart({\r\n\t\t\t\tproductID: current._id,\r\n\t\t\t\tvariations: options,\r\n\t\t\t\tquantity\r\n\t\t\t});\r\n\r\n\t\t\tif (response) {\r\n\t\t\t\treturn toast.error(`Error: ${response}`, toastSettings);\r\n\t\t\t}\r\n\t\t\treturn toast.success(`Item added to cart`, toastSettings);\r\n\t\t} else {\r\n\t\t\tconst response = await addToCart({ productID: current._id, quantity });\r\n\t\t\tif (response) {\r\n\t\t\t\treturn toast.error(`Error: ${response}`, toastSettings);\r\n\t\t\t}\r\n\t\t\treturn toast.success(`Item added to cart`, toastSettings);\r\n\t\t}\r\n\t};\r\n\r\n\tif (error) {\r\n\t\treturn (\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<h3 className='error'>Error: {error}</h3>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (!loading && current !== null) {\r\n\t\tlet variations = null;\r\n\t\tif (current.variations) {\r\n\t\t\tconst keys = Object.keys(current.variations);\r\n\t\t\tconst values = Object.values(current.variations);\r\n\r\n\t\t\t// Set options to state\r\n\t\t\tvariations = {};\r\n\t\t\tkeys.forEach(key => {\r\n\t\t\t\tvariations[key] = '';\r\n\t\t\t});\r\n\t\t\tif (options === null) {\r\n\t\t\t\tsetOptions({ ...variations });\r\n\t\t\t}\r\n\r\n\t\t\t// Create HTML\r\n\t\t\tvariations = keys.map((key, i) => (\r\n\t\t\t\t<p key={i}>\r\n\t\t\t\t\t{key.toUpperCase()}\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname={key}\r\n\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\tsetOptions({ ...options, [e.target.name]: e.target.value })\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<option value=''>Select</option>\r\n\t\t\t\t\t\t{values[i].map(value => (\r\n\t\t\t\t\t\t\t<option value={value} key={value}>\r\n\t\t\t\t\t\t\t\t{value}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</p>\r\n\t\t\t));\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<main className='product-page'>\r\n\t\t\t\t<div className='container'>\r\n\t\t\t\t\t<div className='product-page-wrapper'>\r\n\t\t\t\t\t\t<Link className='go-back-btn' to='/store'>\r\n\t\t\t\t\t\t\tGo Back\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<div className='product-page-grid'>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='product-page-image'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: `url(https://res.cloudinary.com/dnchnxwkl/image/upload/w_1000,c_fill/${current.photo_id})`\r\n\t\t\t\t\t\t\t\t}}></div>\r\n\t\t\t\t\t\t\t<div className='product-page-content'>\r\n\t\t\t\t\t\t\t\t<h1>{current.name}</h1>\r\n\t\t\t\t\t\t\t\t{current.discountPrice ? (\r\n\t\t\t\t\t\t\t\t\t<p className='product-price'>\r\n\t\t\t\t\t\t\t\t\t\t<span>{current.price / 100}$</span>\r\n\t\t\t\t\t\t\t\t\t\t{current.discountPrice / 100}$\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<p className='product-price'>{current.price / 100}$</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<div className='product-page-variations'>\r\n\t\t\t\t\t\t\t\t\t{variations && variations}\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\tQuantity\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tname='quantity'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={quantity}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e => setQuantity(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className='add-to-cart-btn' onClick={sendToCart}>\r\n\t\t\t\t\t\t\t\t\tAdd To Cart\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='product-page-description'>\r\n\t\t\t\t\t\t\t<h4>Description</h4>\r\n\t\t\t\t\t\t\t<p>{current.description}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ToastContainer\r\n\t\t\t\t\tautoClose={2000}\r\n\t\t\t\t\tpauseOnFocusLoss={false}\r\n\t\t\t\t\tonClick={() => history.push('/cart')}\r\n\t\t\t\t/>\r\n\t\t\t</main>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<BasicLoading />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n\tcurrent: state.products.current,\r\n\tloading: state.products.loading,\r\n\terror: state.products.error\r\n});\r\n\r\nexport default connect(mapStateToProps, { getSingle, addToCart })(ProductPage);\r\n"],"sourceRoot":""}